(this.webpackJsonp=this.webpackJsonp||[]).push([[47],{PKoC:function(e,s,t){"use strict";t.r(s),t.d(s,"SqliteDatabaseImpl",(function(){return o}));var a,i=t("8s2m"),n=t("fsN4"),l=t("jDHv");class c{constructor(e){this.sqliteTable=void 0;if(2!==e.split("/").length)throw Error("Invalid table path");switch(e){case i.a.TablePath.Message:this.sqliteTable=n.default.getInstance().Core.Message;break;case i.a.TablePath.Res:this.sqliteTable=n.default.getInstance().Res.Res;break;case i.a.TablePath.Ref:this.sqliteTable=n.default.getInstance().Res.Ref;break;default:throw new Error("init unknow Table"+e)}}async insertMulti(e,s=i.a.DefaultInsertOptions){const t=await this.sqliteTable.insertMulti(e,{partition:s.partition,replace:!1,optimized:!0}),a={success:[],fail:[]};if(t.success.length==e.length)a.success=e;else{const s=t.success[0]||t.fail[0],i=Object.keys(s),n=e=>i.map((s=>e[s])).join("_"),l=new Set(t.success.map((e=>n(e))));e.forEach((e=>{l.has(n(e))?a.success.push(e):a.fail.push(e)}))}return a}}let o=Object(l.singleton)(i.b)(a=Reflect.metadata("design:type",Function)(a=Reflect.metadata("design:paramtypes",[])(a=class{constructor(){this.tableCache=void 0,this.sessionInfo=void 0,this.tableCache=new Map,this.sessionInfo=null}authenticate(e){this.sessionInfo=e}close(){return Promise.resolve()}table(e){if(!this.sessionInfo)throw Error("acess table before init session: "+e);if(!this.tableCache.has(e)){const s=new c(e);this.tableCache.set(e,s)}return this.tableCache.get(e)}})||a)||a)||a}}]);
//# sourceMappingURL=../sourcemaps/lazy/47.3ab15a52f306e83d32a3.js.map