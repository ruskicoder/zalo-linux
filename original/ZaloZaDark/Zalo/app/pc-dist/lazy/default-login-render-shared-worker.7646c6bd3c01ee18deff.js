(this.webpackJsonp=this.webpackJsonp||[]).push([[8],{"+7Kn":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"d",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"g",(function(){return a})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"c",(function(){return _}));var s=r("N0Be");class n extends Error{constructor(e){super(`[MigrateActionManager] An action handler has already registered for ${e} action type!`),this.name=s.a}}class o extends Error{constructor(e){super(`[MigrateActionManager] No action handler found for ${e} action type!`),this.name=s.d}}class i extends Error{constructor(){super("[SecureKeysToMigrate] Invalid initialized data for SecureKeysToMigrate"),this.name=s.b}}class a extends Error{constructor(){super("[SecureKeysToMigrate] SecureKeysToMigrate hasn't been initialized yet!"),this.name=s.g}}class c extends Error{constructor(){super("[SecureKeysToMigrate] Invalid secure indexedDB key"),this.name=s.e}}class u extends Error{constructor(){super("[MigrateRule] Can't generate new key name due to the lack of userID"),this.name=s.f}}class _ extends Error{constructor(){super("[MigrateFlow] Migration stops due to timeout"),this.name=s.c}}},"0W0H":function(e,t,r){"use strict";r.d(t,"d",(function(){return s})),r.d(t,"g",(function(){return n})),r.d(t,"e",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return c})),r.d(t,"f",(function(){return u}));const s="sqlite_m_d",n="sh_snapshoted",o="mig_timelp",i="de_bb_mig",a="mig_sk_ss",c="mig_sck",u=["ZLog","Qos","SecureLocalstorage","Storage",""]},"5l/R":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var s=r("jDHv");const n=Object(s.define)("zlog-writer-manager")},"7k+P":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var s=r("jDHv");const n=Object(s.define)("db-corruption-detector"),o=Object(s.define)("db-corruption-detector-adapter")},BGEY:function(e,t,r){"use strict";r.d(t,"a",(function(){return le})),r.d(t,"b",(function(){return de}));var s=r("Ff2n"),n=r("K0f4"),o=r("wudS"),i=r("bH0y"),a=r("buT3"),c=r("NFKh"),u=r.n(c);function _(){let e=window.localStorage.getItem("sh_z_uuid")||window.localStorage.getItem("z_uuid");return e||(e=function(){let e=(new Date).getTime();window.performance&&"function"==typeof window.performance.now&&(e+=performance.now());let t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){let r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}));return t}()+"-"+u.a.MD5(navigator.userAgent).toString(),window.localStorage.setItem("sh_z_uuid",e)),e}var l=r("gNXM");function d(e){return"string"==typeof e?e:"object"==typeof e?JSON.stringify(e):`${e}`}const f="MIGRATE_ACTION_TYPE/LOCAL_STORAGE/RENAME",g="MIGRATE_ACTION_TYPE/LOCAL_STORAGE/DELETE",h="MIGRATE_ACTION_TYPE/LOCAL_STORAGE/RENAME_AND_MARK_FOR_ENCRYPTION",I="MIGRATE_ACTION_TYPE/IDB/RENAME",D="MIGRATE_ACTION_TYPE/IDB/DELETE",p="MIGRATE_ACTION_TYPE/IDB/RENAME_AND_MARK_FOR_ENCRYPTION";class ${constructor(e,t,r){this.versionObject=void 0,this.actionType=void 0,this.data=void 0,this.versionObject=e,this.actionType=t,this.data=r}}class y{constructor(e){this._rule=null,this._rule=e}}class m{}class b extends ${constructor(e,t){super(e,f,t)}}class w extends y{exec(e,t){const{data:r}=this._rule,[s,n]=r,{dry:o,logger:i}=t||{},c=(e,t)=>{o&&i&&i.log(`localStorage - Rename ${e} into ${t}`)};if(Array.isArray(s)){for(const u of s)if(a.a.hasItem(u)){const t="string"==typeof n?n:n(e,u);z(u,t),c(u,t)}}else{const t=s(e);if(Array.isArray(t)){const r=t;for(const t of r)if(a.a.hasItem(t)){const r="string"==typeof n?n:n(e,t);z(t,r),c(t,r)}}else{const r=t,s=a.a.getAllKeyNames();for(const t of s)if(r(t)){const r=t,s="string"==typeof n?n:n(e,r);z(r,s),c(r,s)}}}}}class v extends m{createAction(e){return new w(e)}}function z(e,t){const r=a.a.getItem(e);a.a.removeItem(e),a.a.setItem(t,r)}class k extends y{exec(e,t){const{data:r}=this._rule,s=r,{dry:n,logger:o}=t||{},i=e=>{n&&o&&o.log(`localStorage - Delete ${e} `)};if(Array.isArray(s))for(const c of s)a.a.hasItem(c)&&(E(c),i(c));else{const t=s(e);if(Array.isArray(t)){const e=t;for(const t of e)a.a.hasItem(t)&&(E(t),i(t))}else{const e=t,r=a.a.getAllKeyNames();for(const t of r)e(t)&&(E(t),i(t))}}}}class S extends m{createAction(e){return new k(e)}}function E(e){a.a.removeItem(e)}class O extends y{exec(e,t){const{data:r}=this._rule,[s,n]=r,{dry:o,logger:i}=t||{},c=(e,t)=>{o&&i&&(i.log(`localStorage - Rename ${e} into ${t}`),i.log(`localStorage - Will encrypt ${t} in its next key reading`))};if(Array.isArray(s)){for(const u of s)if(a.a.hasItem(u)){const t="string"==typeof n?n:n(e,u);A(u,t),c(u,t)}}else{const t=s(e);if(Array.isArray(t)){const r=t;for(const t of r)if(a.a.hasItem(t)){const r="string"==typeof n?n:n(e,t);A(t,r),c(t,r)}}else{const r=t,s=a.a.getAllKeyNames();for(const t of s)if(r(t)){const r=t,s="string"==typeof n?n:n(e,r);A(r,s),c(r,s)}}}}}class T extends m{createAction(e){return new O(e)}}function A(e,t){const r=a.a.getItem(e);a.a.removeItem(e),a.a.setItem(t,r),i.a.markLocalStorageKey(t)}var x=r("H/wq"),K=r("gbvv");class C extends ${constructor(e,t){super(e,I,t)}}class R extends y{async exec(e,t){const{data:r}=this._rule,[s,n,o,i]=r,{dry:a,logger:c}=t||{},u=(e,t)=>{a&&c&&c.log(`indexedDB - Rename ${e} into ${t}`)};let _="";_="string"==typeof s?s:s(e);let d=null;try{d=await l.a.openExistedDB(_)}catch(g){if(g.name===x.a)return;throw g}const f=d.objectStoreNames;if(Array.isArray(n)){const t=n;for(const r of t)f.contains(r)&&await j(e,d,r,o,i,u)}else{const t=n(e);if(Array.isArray(t)){const r=t;for(const t of r)f.contains(t)&&await j(e,d,t,o,i,u)}else{const r=t,s=Array.from(f);for(const t of s)r(t)&&await j(e,d,t,o,i,u)}}d.close()}}class L extends m{createAction(e){return new R(e)}}async function j(e,t,r,s,n,o){const i=t.transaction(r,"readwrite").objectStore(r),a=t.name,c=Object(K.a)(a,r);if(!c)return void 0;const{keyPath:u}=c;if(Array.isArray(s)){const t=s;for(const r of t){if(!(await l.a.doesObjectStoreHaveKey(r,i)))continue;const t="string"==typeof n?n:n(e,r);await l.a.renameKeyOfObjectStore(r,t,i,u),o(r,t)}}else{const t=s(e);if(Array.isArray(t)){const r=t;for(const t of r){if(!(await l.a.doesObjectStoreHaveKey(t,i)))continue;const r="string"==typeof n?n:n(e,t);await l.a.renameKeyOfObjectStore(t,r,i,u),o(t,r)}}else{const r=t,s=await l.a.getAllKeyNamesOfObjectStore(i);for(const t of s){if(!r(t))continue;const s="string"==typeof n?n:n(e,t);await l.a.renameKeyOfObjectStore(t,s,i,u),o(t,s)}}}}class N extends ${constructor(e,t){super(e,D,t)}}class F extends y{async exec(e,t){const{data:r}=this._rule,[s,n,o]=r,{dry:i,logger:a}=t||{},c=e=>{i&&a&&a.log(`indexedDB - Delete ${e}}`)};let u="";u="string"==typeof s?s:s(e);let _=null;try{_=await l.a.openExistedDB(u)}catch(f){if(f.name===x.a)return;throw f}const d=_.objectStoreNames;if(Array.isArray(n)){const t=n;for(const r of t)d.contains(r)&&await B(e,_,r,o,c)}else{const t=n(e);if(Array.isArray(t)){const r=t;for(const t of r)d.contains(t)&&await B(e,_,t,o,c)}else{const r=t,s=Array.from(d);for(const t of s)r(t)&&await B(e,_,t,o,c)}}_.close()}}class M extends m{createAction(e){return new F(e)}}async function B(e,t,r,s,n){const o=t.transaction(r,"readwrite").objectStore(r);if(Array.isArray(s)){const e=s;for(const t of e){await l.a.doesObjectStoreHaveKey(t,o)&&(await l.a.deleteKeyOfObjectStore(t,o),n(t))}}else{const t=s(e);if(Array.isArray(t)){const e=t;for(const t of e){await l.a.doesObjectStoreHaveKey(t,o)&&(await l.a.deleteKeyOfObjectStore(t,o),n(t))}}else{const e=t,r=await l.a.getAllKeyNamesOfObjectStore(o);for(const t of r)e(t)&&(await l.a.deleteKeyOfObjectStore(t,o),n(t))}}}class P extends ${constructor(e,t){super(e,p,t)}}class W extends y{async exec(e,t){const{data:r}=this._rule,[s,n,o,i]=r,{dry:a,logger:c}=t||{},u=(e,t)=>{a&&c&&(c.log(`indexedDB - Rename ${e} into ${t}`),c.log(`indexedDB - Will encrypt ${t} in its next key reading`))};let _="";_="string"==typeof s?s:s(e);let d=null;try{d=await l.a.openExistedDB(_)}catch(g){if(g.name===x.a)return;throw g}const f=d.objectStoreNames;if(Array.isArray(n)){const t=n;for(const r of t)f.contains(r)&&await U(e,d,r,o,i,u)}else{const t=n(e);if(Array.isArray(t)){const r=t;for(const t of r)f.contains(t)&&await U(e,d,t,o,i,u)}else{const r=t,s=Array.from(f);for(const t of s)r(t)&&await U(e,d,t,o,i,u)}}d.close()}}class V extends m{createAction(e){return new W(e)}}async function U(e,t,r,s,n,o){const a=t.transaction(r,"readwrite").objectStore(r),c=t.name,u=Object(K.a)(c,r);if(!u)return void 0;const{keyPath:_}=u;if(Array.isArray(s)){const t=s;for(const s of t){if(!(await l.a.doesObjectStoreHaveKey(s,a)))continue;const t="string"==typeof n?n:n(e,s);await l.a.renameKeyOfObjectStore(s,t,a,_,(()=>{i.a.markIndexedDBKey(c,r,t)})),o(s,t)}}else{const t=s(e);if(Array.isArray(t)){const s=t;for(const t of s){if(!(await l.a.doesObjectStoreHaveKey(t,a)))continue;const s="string"==typeof n?n:n(e,t);await l.a.renameKeyOfObjectStore(t,s,a,_,(()=>{i.a.markIndexedDBKey(c,r,s)})),o(t,s)}}else{const s=t,u=await l.a.getAllKeyNamesOfObjectStore(a);for(const t of u){if(!s(t))continue;const u="string"==typeof n?n:n(e,t);await l.a.renameKeyOfObjectStore(t,u,a,_,(()=>{i.a.markIndexedDBKey(c,r,u)})),o(t,u)}}}}var q=r("+7Kn");const H=new class{constructor(){this._actionFactories=new Map,this.init()}init(){this.registerActionFactory(f,new v),this.registerActionFactory(g,new S),this.registerActionFactory(h,new T),this.registerActionFactory(I,new L),this.registerActionFactory(D,new M),this.registerActionFactory(p,new V)}registerActionFactory(e,t){if(this._actionFactories.has(e))throw new q.a(e);this._actionFactories.set(e,t)}getActions(e){const t=[];for(const r of e){const{actionType:e}=r,s=this.getActionFactory(e).createAction(r);t.push(s)}return t}getActionFactory(e){const t=this._actionFactories.get(e);if(!t)throw new q.d(e);return t}},G=["captcha_cert","l-lg-t","_config_new_remember","_config_opt_remember","z_admin_config","language","z_uuid","z_recentp","z_recoun","z_reclogtype","quest_cert","already_login","zpw_type","zpw_ver","app_ver","e1cfeb1a59820a1ef96743cac2394fc4","ADD_SYSTEM_INFO","z_nom","zcpu_messure_update","zcpu_messure_recording","last_inject_events","gr_topics__pin_limit","off_socket","z_new_register","FORGOT_PASSWORD","zlast_uid","z_recentin","z_recentuid","zlast_logout","_need_set_remember","_set_value_action_log","FORCE_GET_FRIEND_LIST","z_crdbSyncMsg","z_needSyncMsg","z_syncmsgInfo","singleton_web_app","z_lspop_faildb","zlast_reset_db","reset__zklastefid","qos_url","qos_lastRequestId","_ud_launch_","_remme_","_rupd_","_avblupd_","_ud_what_new_","_ud_new_version_","_stry_cf_","_s_ph_if_","limit_pin_messages","zipKey","last_timeonapp_submit","_firstCall","zpc_log_submitted_at","upload_log_client","z_listroom_","z_c_d_","zv_cu","__cookieStore__","pcinfo","mig_ver_sh","user_ids","zclr_res_pid","domain-tool-v1-db-cache-data","mig_lt_sh","${userID}_viewerkey","${userID}_cl_u_r_","${userID}react_","${userID}_deviceSettings"],Q=["introduced-ttl-${userID}","${userID}_g_token","${userID}_d_token","__list_recent_search__${userID}","__list_recent_g_search__${userID}v2","ttl-v1-${userID}","ttl-v1-saved-${userID}","fas_${userID}","feat-pro-count-auto-replies-${userID}"],Y=["passCode","timeOut","_skip_stk_cat_","lst_force_reset_db","z_rdb_","z_dl_media_setting","z_dl_media_info","recent_save_path","text-file-editor-rect","lstdm_","filesPath","z_lf_frl","DB_TYPE_SETTING_KEY","${userID}_ver_sticker_suggest","${userID}_ver_giphy_suggest","${userID}_ver_sticker_cate_list","${userID}_ver_giphy_cate","${userID}_ver_tenor_to_sticker","zres_mgt_${userID}","${userID}_preload_cache","last_dttm_overflow_queue_${userID}","${userID}_show_onboard_cata","z_stw_${userID}","ztipfol_${userID}","z1gbftip_${userID}","_rso_${userID}","sticker_hint${userID}","tg_hfg${userID}","_lastLogSidebarState_${userID}","z_sendtome_filessent_${userID}","z_del_everyone_${userID}","z_sendtome_supportpage_${userID}","${userID}_gr_topics__force_sync","${userID}_debugsignal","call_st_autoAudioInput_${userID}","call_st_autoAudioOutput_${userID}","call_st_audioInput_${userID}","call_st_audioInputVl_${userID}","call_st_audioOutput_${userID}","call_st_audioOutputVl_${userID}","call_st_videoInput_${userID}","call_auto_adjust_${userID}","z1gbfpop_${userID}","_clipboard_suggestion_${userID}","_auto_sticker_${userID}","_double_click_reply_${userID}","z_sendtome_quicksend_${userID}","${userID}__QM__showDashboardTooltip","${userID}__QM__showEntrypointRedDot","${userID}__QM__showSettingsRedDot","${userID}__QM__showWelcome","${userID}__QM__searchTutorialCount","z_sendtome_bubbledot_${userID}","z_sendtome_suggest_limit_${userID}","${userID}_BUTTON_FRIEND_LIST","${userID}_BUTTON_REQUEST_FRIEND","${userID}_BUTTON_SEND_REQUEST_FRIEND","${userID}_BUTTON_NEW_FRIEND","f_nf_${userID}","z_sendtome_${userID}","z_sendtome_pinned_${userID}","nlst_w_${userID}","${userID}_zinit_sgg","onboarding_flag_${userID}","${userID}__dbtimepc","overflowts_${userID}","${userID}_data_pin_hidden_chat","${userID}_data_ids_hidden_chat","${userID}_config_show_unread_time","${userID}_data_config_hidden_chat","${userID}_zpinc","me_ts_${userID}","${userID}_signal_cur_opid","${userID}_signalenable","${userID}_signalsubdevices","${userID}_signallastinit","${userID}_signalreinitsub","${userID}_signalrk","recent_sticker_event_${userID}","recent_card_event_${userID}","${userID}_version_alias","${userID}_time_alias","${userID}_last_err_alias","${userID}_ver_bl_friend","${userID}_init_fetch_fr","${userID}_last_time_fetch_fr_success","${userID}_key_last_get_fr_status","${userID}_last_time_req_to_me","fr_req_src_${userID}","${userID}_alias_key","${userID}phonebook_ver_key","${userID}_phonebook_key","${userID}_time_update_pbook","${userID}_last_err_pb","${userID}_last_time_verify_fr_list","${userID}_config_alias","${userID}_z_uids_bl","zrgf_${userID}","${userID}_total_mem_per_fetch","muq_${userID}","${userID}_cdkl","${userID}_cdk","${userID}_last_ack_evict","lsmsg_${userID}","askNoti_${userID}","acv2_${userID}","ac_${userID}","aco_${userID}","sock_msg_${userID}","sock_ac_${userID}","sock_aco_${userID}","actrv2_${userID}","actr_${userID}","actro_${userID}","${userID}_show_sidebar_cata","${userID}_cata_ver","${userID}__QM__lastUpdate","zretry_v1__${userID}","mgrk_${userID}","mgripck_v4_${userID}","z_trackfollow_v2${userID}","z_tracktimesearch${userID}","z_his_decay${userID}","z_trackfrecency_v2${userID}","z_sound_${userID}","z_cleardata_${userID}","z_e2ee_times_${userID}","z_chatbg_${userID}","z_capzalo_${userID}","z_scrshot_hotkey_${userID}","z_scrshot_hotkey_withoutZ_${userID}","z_ytpr_${userID}","z_ivap_${userID}","z_ivaps_${userID}","z_tptm_${userID}","z_contact_${userID}","z_copy_excel_${userID}","z_suggestMentions_${userID}","z_todoEventRemind_${userID}","z_file_enable_auto_download_${userID}","z_file_enable_thumbnail_${userID}","z_file_white_list_${userID}","z_text_file_editor_wrap_${userID}","z_enable_notify_call_${userID}","${userID}_z_sc","${userID}_lff_","${userID}_ver_pin","${userID}_LAST_CONTACT_LIST_OPEN","hfresetac355_${userID}","${userID}_rs","${userID}_remo","${userID}_s_stk","${userID}_st-on-dock","${userID}_st-ver_","${userID}_rm_s","lbl_${userID}","z_mdbk_${userID}","${userID}_ib","${userID}_off_tip_","${userID}_cot","${userID}_rate","${userID}_bd","${userID}_lbl-info","${userID}__imlc","${userID}__imlp","${userID}_unrImsg","${userID}_upss","sock_pgm_${userID}","${userID}iurc_","${userID}dmn_","${userID}__gbunread","${userID}_dmar","${userID}_dst","${userID}_wn","${userID}_ri","${userID}_emo","${userID}_h_n_stck","${userID}_efs","${userID}_pfs","${userID}_grv","${userID}_nsp_","${userID}_lstCrS","${userID}_cpa","${userID}___sdbs","${userID}_un_td","${userID}_51area","${userID}_adtd","${userID}_adtdm","${userID}_arotd","${userID}_n_up_t","${userID}_ta","${userID}_fcbt","${userID}_daet","${userID}_bnbs","${userID}_lused-lbl","${userID}_z_jumpurl","${userID}_inc_m_","${userID}_z_cngc","${userID}_tvi","${userID}_tbsh","${userID}_wps","${userID}_wfs","${userID}_m_u_f","${userID}u_l_f","${userID}_z_u_s","${userID}_lbl_coll","${userID}_lbl-intro","${userID}_right_sb","${userID}__update_gi","${userID}_rem_pn","${userID}_conv_ux_ver","${userID}_conv_ux_mul_lbl","${userID}_conv_ux_ec","${userID}_cls_m_b","${userID}_conv_tr_inf","${userID}_bt","${userID}_z_phonebook_version","${userID}_l_r_msg","z_sync_key__${userID}","z_sync_wr_key__${userID}","${userID}_showCf","z_sync_stt${userID}","mgrthreadmsgk_v2_${userID}","zthrpendingact_${userID}","${userID}_room_end_meeting","z_frl_${userID}","lastfilepath_${userID}","lastimagepath_${userID}","_dk_stk_${userID}","${userID}_lbl_ver","${userID}_signalserverenable","${userID}_mig_ver_usr","${userID}_mig_lt_usr","INIT_FRIEND_BA${userID}","${userID}_fdn_","${userID}___recent_catalog__","${userID}_rec_pack","NEED_FETCH_PROFILE_ME${userID}","${userID}sync_cross_settings","${userID}_citk","${userID}_sktmig","${userID}_key_last_fetch_group","${userID}_z_b__a_view_onboarding_state","${userID}_z_b__a_view_business_user_status","${userID}_z_b__a_view_business_profile","${userID}_z_b__a_first_upgrade_business_account"],Z=["diskCacheInfos","lastTimeGetDiskCacheInfos","__ta__dev__","isAutoScroll","isAlwaysOnTop","filterByName","sticker_cf_v3","sticker_v3","feedback_clicked","ztypsp_","__STORAGE_WARN_TIMESTAMP__","IS_FACEBOOK_LOGIN","NEED_GET_COOKIE_MP3","z_os_lastSession","zfl_disable_discovery_v2","__lstsbnet_","last-msgid-sock","last-queue-poll","en_zshop","z_auto_dl_msg-setting","z_auto_dl_msg-info","zdb_setting","zroll_qc","${userID}_time_begin_promote","last_stk_${userID}","${userID}_show_popup_del","last_sc${userID}","${userID}_fr_has_convs","zmigrate_${userID}_lastId","zmigrate_${userID}","zmigrate_${userID}_sch","zmigrate_${userID}_total","zmigrate_${userID}_stat","zmigrate_${userID}_er","${userID}_z_spfonl_","z_trackthk${userID}","z_trackfollow${userID}","z_trackfrecency${userID}","z_e2ee_file_times_${userID}","z_theme_${userID}","z_ytcf_${userID}","__list_recent_g_search__${userID}","${userID}_st-first-time","${userID}_st-mg_","${userID}_bn","${userID}_cstk","${userID}_gbrt","${userID}_gbin","${userID}_gbgn","${userID}_awf","${userID}_qe","${userID}_tmem","${userID}_off_pr_st","${userID}_mig_mention_v1","${userID}_nnc","${userID}_rctfm","${userID}_tasks","${userID}_cte","${userID}_tte","${userID}__zptd","${userID}_ztbd","${userID}_c_p_","${userID}_tdlv","${userID}__zlnt","update-to-use-vanish-${userID}","set-vanish--succeed${userID}"];function J(e){return e.startsWith("sh_")}function X(e,t){if(!Object(o.c)(e))return!1;const r=Object(o.d)(e);return t.startsWith(`${r}_`)}function ee(e){return!!["zinsrc","tmpr"].some((t=>e.startsWith(`${t}_`)))||G.some((t=>{const r="^"+t.replace("${userID}","[0-9]+")+"$";return new RegExp(r,"g").test(e)}))}function te(e,t){return!(!t.startsWith("hide-fbadge")||!t.endsWith(e))||(t===`$auto-replies-state-v1-${e}`||Q.some((r=>{const s=r.replace("${userID}",e);return t.includes(s)})))}function re(e,t){if(t.startsWith(`${e}_z_ml_`))return!0;if(t.startsWith(`${e}_`)&&t.endsWith("_lastReceiveTs"))return!0;if(t.startsWith(`${e}_tabmsg.header_`))return!0;if(t.startsWith(`TIP_CARD_ID_${e}_`))return!0;if(t.startsWith(`TIP_PROMO_ICON_ID_${e}_`))return!0;if(t.startsWith(`TIP_EFFECT_ID_${e}_`))return!0;if(t.startsWith(`_recent_card_p_${e}_`))return!0;if(t.startsWith(`zklastefid_${e}_`))return!0;let r=t.split("_");return 2===r.length&&r[0]===e&&!isNaN(Number(r[1]))||(!!t.startsWith(`${e}_z_bl_`)||(!!t.includes("lstfpmedia")||(!!t.startsWith(`${e}_z_frq_`)||(!!t.startsWith(`${e}_at_k_`)||(!(!t.startsWith(e)||!t.endsWith("_z_clmt"))||(!!t.startsWith(`sock_verfy_${e}`)||(!!t.startsWith(`z_retry_${e}_`)||(!!t.startsWith(`${e}_mact_`)||(!!t.startsWith(`${e}_mhasm_`)||(r=t.split("_"),!(3!==r.length&&4!==r.length||r[0]!==e||isNaN(Number(r[2])))||(!!t.startsWith(`${e}_sync_cross_state`)||Y.some((r=>{const s=r.replace("${userID}",e);return t===s})))))))))))))}function se(e){if(e.includes("_rpk_"))return!0;if(e.endsWith("_signalssgr"))return!0;if(["image","fetchedImages","file","fetchedFiles","link","fetchedLinks"].some((t=>e.endsWith(`${t}`))))return!0;if(e.includes("_z_srq_name_"))return!0;return!!/^[0-9]{19}_msg_/g.test(e)||Z.some((t=>{const r="^"+t.replace("${userID}","[0-9]+")+"$";return new RegExp(r,"g").test(e)}))}var ne=[...[new b({currentSharedKeyVer:0,targetVer:1},[()=>e=>ee(e)&&!J(e),(e,t)=>{let r=t;const s=["deviceSettings","viewerkey","_cl_u_r_","react_"];for(const n of s)if(t.endsWith(n)){const e=/^[_-]+|[_-]+$/g;r=n.replace(e,"");break}return`sh_${r}`}]),new b({currentUserScopedKeyVer:0,targetVer:1},[e=>e?t=>re(e,t)&&!X(e,t):[],(e,t)=>{if(!e)throw new q.f;const r=Object(o.d)(e);let s=t;if(t.includes(e))if(t===`${e}_${e}`)s=e;else{const r=/^[_-]+|[_-]+$/gm;s=t.split(e).filter((e=>""!==e)).map((e=>e.replace(r,""))).join("_").replace(/^(sh_)+/g,"")}return`${r}_${s}`}]),new class extends ${constructor(e,t){super(e,g,t)}}({currentSharedKeyVer:0,currentUserScopedKeyVer:0,targetVer:1},(()=>e=>se(e))),new class extends ${constructor(e,t){super(e,h,t)}}({currentUserScopedKeyVer:0,targetVer:1},[e=>e?t=>te(e,t)&&!X(e,t):[],(e,t)=>{if(!e)throw new q.f;const r=Object(o.d)(e);if(t===`$auto-replies-state-v1-${e}`)return`${r}_auto-replies-state-v1`;let s=t;if(t.includes(e))if(t===`${e}_${e}`)s=e;else{const r=/^[_-]+|[_-]+$/gm;s=t.split(e).filter((e=>""!==e)).map((e=>e.replace(r,""))).join("_").replace(/^(sh_)+/g,"")}return`${r}_${s}`}]),new C({currentSharedKeyVer:0,targetVer:1},["zlocalstorage",["friend-blocked","info-cache","retry-cache"],()=>e=>"string"==typeof e&&ee(e)&&!J(e),(e,t)=>{let r=t;const s=["deviceSettings","viewerkey","_cl_u_r_","react_"];for(const n of s)if(t.endsWith(n)){const e=/^[_-]+|[_-]+$/g;r=n.replace(e,"");break}return`sh_${r}`}]),new C({currentSharedKeyVer:0,targetVer:1},["zsecure-localstorage",["async-store"],()=>e=>"string"==typeof e&&ee(e)&&!J(e),(e,t)=>{let r=t;const s=["deviceSettings","viewerkey","_cl_u_r_","react_"];for(const n of s)if(t.endsWith(n)){const e=/^[_-]+|[_-]+$/g;r=n.replace(e,"");break}return`sh_${r}`}]),new C({currentUserScopedKeyVer:0,targetVer:1},["zlocalstorage",["friend-blocked","info-cache","retry-cache"],e=>e?t=>"string"==typeof t&&re(e,t)&&!X(e,t):[],(e,t)=>{if(!e)throw new q.f;const r=Object(o.d)(e);let s=t;if(t.includes(e))if(t===`${e}_${e}`)s=e;else{const r=/^[_-]+|[_-]+$/gm;s=t.split(e).filter((e=>""!==e)).map((e=>e.replace(r,""))).join("_").replace(/^(sh_)+/g,"")}return`${r}_${s}`}]),new C({currentUserScopedKeyVer:0,targetVer:1},["zsecure-localstorage",["async-store"],e=>e?t=>"string"==typeof t&&re(e,t)&&!X(e,t):[],(e,t)=>{if(!e)throw new q.f;const r=Object(o.d)(e);let s=t;if(t.includes(e))if(t===`${e}_${e}`)s=e;else{const r=/^[_-]+|[_-]+$/gm;s=t.split(e).filter((e=>""!==e)).map((e=>e.replace(r,""))).join("_").replace(/^(sh_)+/g,"")}return`${r}_${s}`}]),new N({currentSharedKeyVer:0,currentUserScopedKeyVer:0,targetVer:1},["zlocalstorage",["friend-blocked","info-cache","retry-cache"],()=>e=>"string"==typeof e&&se(e)]),new N({currentSharedKeyVer:0,currentUserScopedKeyVer:0,targetVer:1},["zsecure-localstorage",["async-store"],()=>e=>"string"==typeof e&&se(e)]),new P({currentUserScopedKeyVer:0,targetVer:1},["zlocalstorage",["friend-blocked","info-cache","retry-cache"],e=>e?t=>"string"==typeof t&&te(e,t)&&!X(e,t):[],(e,t)=>{if(!e)throw new q.f;const r=Object(o.d)(e);if(t===`$auto-replies-state-v1-${e}`)return`${r}_auto-replies-state-v1`;let s=t;if(t.includes(e))if(t===`${e}_${e}`)s=e;else{const r=/^[_-]+|[_-]+$/gm;s=t.split(e).filter((e=>""!==e)).map((e=>e.replace(r,""))).join("_").replace(/^(sh_)+/g,"")}return`${r}_${s}`}]),new P({currentUserScopedKeyVer:0,targetVer:1},["zsecure-localstorage",["async-store"],e=>e?t=>"string"==typeof t&&te(e,t)&&!X(e,t):[],(e,t)=>{if(!e)throw new q.f;const r=Object(o.d)(e);if(t===`$auto-replies-state-v1-${e}`)return`${r}_auto-replies-state-v1`;let s=t;if(t.includes(e))if(t===`${e}_${e}`)s=e;else{const r=/^[_-]+|[_-]+$/gm;s=t.split(e).filter((e=>""!==e)).map((e=>e.replace(r,""))).join("_").replace(/^(sh_)+/g,"")}return`${r}_${s}`}])]];const oe=new class{constructor(){this._ruleMap=new Map,this._initRuleMap()}_getRuleMapKey(e){let t="x",r="x";const{targetVer:s}=e;return Object.hasOwnProperty.call(e,"currentSharedKeyVer")&&(t=d(e.currentSharedKeyVer)),Object.hasOwnProperty.call(e,"currentUserScopedKeyVer")&&(r=d(e.currentUserScopedKeyVer)),`${t}_${r}_${s}`}_initRuleMap(){const e=ne;for(const t of e){const{versionObject:e}=t,r=this._getRuleMapKey(e);let s=[];this._ruleMap.has(r)&&(s=this._ruleMap.get(r)),s.push(t),this._ruleMap.set(r,s)}}getRules(e,t,r){const s=this._getRuleMapKey({currentSharedKeyVer:e,targetVer:r}),n=this._ruleMap.get(s)||[],o=this._getRuleMapKey({currentUserScopedKeyVer:t,targetVer:r}),i=this._ruleMap.get(o)||[],a=this._getRuleMapKey({currentSharedKeyVer:e,currentUserScopedKeyVer:t,targetVer:r});return[...n,...i,...this._ruleMap.get(a)||[]]}};var ie=r("N0Be");class ae{constructor(){this.startTime=null,this.endTime=null}start(){this.startTime=performance.now(),this.endTime=null}end(){this.endTime=performance.now()}reset(){this.startTime=null,this.endTime=null}isDataReady(){return null!==this.startTime&&null!==this.endTime}getDuration(){if(!this.isDataReady())return null;return Math.round(this.endTime-this.startTime)}}const ce=["err"];async function ue(e,t){const{currentSharedKeysVer:i,currentUserScopedKeysVer:c,targetVer:u,err:l}=t,d=l instanceof Error?`${function(e){switch(e){case ie.a:return 1;case ie.d:return 2;case ie.b:return 3;case ie.g:return 4;case ie.e:return 5;case ie.f:return 6;case ie.c:return 7;default:return 0}}(l.name)}`:"0";i<u&&(a.a.setItem(n.l,"0"),a.a.setItem(n.b,d));if(null!==e&&c<u){const t=Object(o.d)(e),r=`${t}_${n.m}`;a.a.setItem(r,"0");const s=`${t}_${n.c}`;a.a.setItem(s,d)}const f=await r("wBhU");f.withScope((e=>{e.setTag(n.j,`${_()}`);const{err:r}=t,o=Object(s.a)(t,ce);e.setExtras(o),r instanceof Error?f.captureException(r):"string"==typeof r&&f.captureMessage(r,f.Severity.Fatal)}))}function _e(e,t,r){const s=oe.getRules(e,t,r);return H.getActions(s)}function le(e){const t=`${Object(o.d)(e)}_${n.n}`;if(!a.a.hasItem(t))return!1;return 1===+a.a.getItem(t)}async function de(e,t={}){Object(o.f)();const r=null!==e,s=null!==a.a.getItem(n.b);let c=!1;if(r){const t=`${Object(o.d)(e)}_${n.c}`;c=null!==a.a.getItem(t)}const{dry:u,logger:_}=t;if(u&&(a.a.turnOnDryMode(),l.a.turnOnDryMode()),r&&(i.a.init(e),!u&&function(){const e=n.k;return!!a.a.hasItem(e)&&1==+a.a.getItem(e)}()&&le(e)))return;const f=new ae;f.start();const g={currentSharedKeysVer:n.d,currentUserScopedKeysVer:n.d,targetVer:n.d,err:null};g.targetVer=1;let h=n.d;!u&&a.a.hasItem(n.k)&&(h=+a.a.getItem(n.k),g.currentSharedKeysVer=h),s&&(h=n.a);let I=n.d;if(r){const t=`${Object(o.d)(e)}_${n.n}`;!u&&a.a.hasItem(t)&&(I=+a.a.getItem(t),g.currentUserScopedKeysVer=I)}c&&(I=n.a),await new Promise((async s=>{const i=setTimeout((async()=>{const t=new q.c;_&&_.error(t.message),g.err=t,await ue(e,g),s()}),n.e);try{for(;;){const r=_e(h,I,1);if(0===r.length)break;for(const s of r)await s.exec(e,t);h<1&&h!==n.a&&(h+=1,g.currentSharedKeysVer=h),null!==I&&I!==n.a&&I<1&&(I+=1,g.currentUserScopedKeysVer=I)}if(clearTimeout(i),h!==n.a&&(a.a.setItem(n.k,d(1)),a.a.setItem(n.l,"1")),r&&I!==n.a){const t=Object(o.d)(e),r=`${t}_${n.n}`;a.a.setItem(r,d(1));const s=`${t}_${n.m}`;a.a.setItem(s,"1")}}catch(c){0,g.err=c,await ue(e,g)}finally{s()}})),i.a.save(),f.end();const D=f.getDuration();if(null!==D){if(a.a.setItem(n.f,`${D}`),r){const t=Object(o.d)(e);a.a.setItem(`${t}_${n.g}`,`${D}`)}f.reset()}const p=a.a.getAllKeyNames().length+await async function(){let e=0;const t=["friend-blocked","info-cache","retry-cache"];for(const r of t)e+=await l.a.getTotalKeyCountOfStore("zlocalstorage",r);return e+=await l.a.getTotalKeyCountOfStore("zsecure-localstorage","async-store"),e}();if(a.a.setItem(n.h,`${p}`),r){const t=Object(o.d)(e);a.a.setItem(`${t}_${n.i}`,`${p}`)}}},Cvfp:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return n}));const s="-/~^~/-",n={zlocalstorage:{"cocos-res":{keyPath:"path",dataPath:"data"},"db-stchecksum":{keyPath:"checksum",dataPath:"url"},"friend-blocked":{keyPath:"key",dataPath:"val"},"info-cache":{keyPath:"key",dataPath:"val"},"retry-cache":{keyPath:"key",dataPath:"val"}},"zsecure-localstorage":{"async-store":{keyPath:"key",dataPath:"val"}}}},"H/wq":function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return n}));const s="NonExistedDBError";class n extends Error{constructor(e){super(e),this.name=s}}},Ilem:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));let s=function(e){return e.PARTIAL="PARTIAL",e.FULL="FULL",e}({})},K0f4:function(e,t,r){"use strict";r.d(t,"k",(function(){return s})),r.d(t,"n",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return a})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"j",(function(){return _})),r.d(t,"l",(function(){return l})),r.d(t,"m",(function(){return d})),r.d(t,"f",(function(){return f})),r.d(t,"g",(function(){return g})),r.d(t,"h",(function(){return h})),r.d(t,"i",(function(){return I}));const s="sh_mig_ver_sh",n="mig_ver_usr",o="sh_mig_lt_sh",i="mig_lt_usr",a=0,c=-1,u=1e6,_="migrate_storage_key",l="sh_mig_scs_sh",d="mig_scs_usr",f="sh_mig_d",g="mig_d",h="sh_mig_co",I="mig_co"},KRcn:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var s=r("PLj1");function n(){let e;try{switch(__ZaBUNDLENAME__.toLocaleLowerCase()){case"main":e=s.b.Main;break;case"web":e=s.b.Web;break;case"login":e=s.b.Login;break;case"photo":e=s.b.Photo;break;case"render":e=s.b.Render;break;case"shared-worker":e=s.b.SharedWorker;break;case"preload-shared-worker":e=s.b.PreloadSharedWorker;break;case"preload-sqlite":e=s.b.PreloadSQLite;break;case"utility-process-sqlite":e=s.b.UProcessSQLite;break;default:e=s.b.Unknown}}catch{e=s.b.Unknown}return e}},N0Be:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"d",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"g",(function(){return i})),r.d(t,"e",(function(){return a})),r.d(t,"f",(function(){return c})),r.d(t,"c",(function(){return u}));const s="ExistedActionHandlerError",n="NonExistedActionHandlerError",o="InvalidInitializedDataForSecureKeysToMigrateError",i="UninitializedSecureKeysToMigrateError",a="SecureKeysToMigrateInvalidIDBKeyError",c="UnavailableUserIDForKeynameGenerationError",u="MigrateTimeoutError"},PLj1:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return i}));var s=r("fsQs");let n=function(e){return e.Main="main",e.Render="render",e.SharedWorker="shared-worker",e.PreloadSharedWorker="preload-shared-worker",e.Unknown="unknown",e.Photo="photo",e.Web="web",e.Embed="embed",e.Login="login",e.PreloadSQLite="preload-sqlite",e.UProcessSQLite="u-process-sqlite",e}({});const o={[n.Main]:s.f,[n.Render]:s.f,[n.SharedWorker]:s.f,[n.PreloadSharedWorker]:s.g,[n.PreloadSQLite]:s.f,[n.Unknown]:s.f,[n.Photo]:s.f,[n.Web]:s.h,[n.Embed]:-1,[n.Login]:s.g,[n.UProcessSQLite]:s.g},i=[n.Embed,n.Unknown]},QxEN:function(e,t,r){"use strict";var s=r("YrRS"),n=r("eBEg");let o;o="undefined"!=typeof window&&globalThis.zconsole||console;const i=function(){},a={release:["log","debug","trace"]};if(o){for(const[t,r]of Object.entries(a))if("release"===t)for(const e of r)o[e]=i;globalThis.zconsole=o;const e=n.a.create(["zconsole","nullLogger"],{});Object(s.a)(e,!0)}},UJDs:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return n}));let s=function(e){return e[e.info=0]="info",e[e.error=1]="error",e[e.warn=2]="warn",e[e.debug=3]="debug",e[e.critical=4]="critical",e}({});const n={[s.info]:"info",[s.error]:"error",[s.warn]:"warn",[s.debug]:"debug",[s.critical]:"critical"}},Wc52:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var s=r("fsQs"),n=r("PLj1");const o={[n.b.Unknown]:{toConsole:!1,toFile:!1,fileInterval:s.f},[n.b.Embed]:{toConsole:!1,toFile:!1,fileInterval:-1},[n.b.Main]:{toConsole:!1,toFile:!0,fileInterval:s.f},[n.b.Login]:{toConsole:!0,toFile:!0,fileInterval:s.g},[n.b.Render]:{toConsole:!0,toFile:!0,fileInterval:s.f},[n.b.Photo]:{toConsole:!0,toFile:!0,fileInterval:s.f},[n.b.SharedWorker]:{toConsole:!1,toFile:!0,fileInterval:s.f},[n.b.PreloadSharedWorker]:{toConsole:!0,toFile:!0,fileInterval:s.f},[n.b.Web]:{toConsole:!0,toFile:!0,fileInterval:s.h},[n.b.PreloadSQLite]:{toConsole:!0,toFile:!0,fileInterval:s.f},[n.b.UProcessSQLite]:{toConsole:!1,toFile:!0,fileInterval:s.f}}},YdFT:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return u}));var s=r("Ilem"),n=r("AH6j"),o=r("wbRq"),i=r("wH4e");class a extends n.a{constructor(e,t,r,s){super(o.a.DB_CORRUPTION_DETECTED),this.tsStartCheck=e,this.adapterType=t,this.corruptionInfo=r,this.options=s}}class c extends a{constructor(e,t){super(e,i.AdapterType.IDB,{type:s.a.FULL,databaseCorruptInfo:{database:""},databaseCorrupt:"",databaseImpacts:[]},{allowRejectRestart:t})}}class u extends a{constructor(e,t){super(e,i.AdapterType.SQLite,t,{allowRejectRestart:!1})}}},YrRS:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return _}));var s=r("jDHv"),n=r("PLj1"),o=r("KRcn"),i=r("5l/R"),a=r("XB6V");function c(){const e=Object(o.a)();if(n.a.includes(e))return;s.ModuleContainer.resolve(i.a).setupWriters();_(s.ModuleContainer.resolve(a.a).createZLogger("zconsole",["zlogger"]))}const u=function(){};function _(e,t=!1){const r=["_applyFilter","_getLevel","_transport"],s=Object.getOwnPropertyNames(e).filter((t=>"function"==typeof e[t]&&!r.includes(t)));if(globalThis.zconsole)for(const n of s)globalThis.zconsole[n]=t?u:e[n].bind(e)}},bH0y:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var s=r("+7Kn"),n=r("wudS"),o=r("Cvfp");const i=new class{constructor(){this._localStorageKeys=null,this._indexedDBKeys=null,this._keyName=null}init(e){if(!e)throw new s.b;const t=`${Object(n.d)(e)}_sktmig`;this._keyName=t;let r={l:[],i:[]};const o=window.localStorage.getItem(t);null!==o&&(r=JSON.parse(o));const{l:i,i:a}=r;this._localStorageKeys=i,this._indexedDBKeys=a}_hasInitialized(){return null!==this._keyName&&null!==this._localStorageKeys&&null!==this._indexedDBKeys}_getKeyName(){if(!this._hasInitialized())throw new s.g;return this._keyName}_getSecureIndexedDBKey(e,t,r){return[e,t,r].join(o.a)}getSecureIndexedDBKeyObject(e){const t=e.split(o.a);if(3!==t.length)throw new s.e;const[r,n,i]=t;return{dbName:r,storeName:n,keyName:i}}getLocalStorageKeys(){if(!this._hasInitialized())throw new s.g;return this._localStorageKeys}getIndexedDBKeys(){if(!this._hasInitialized())throw new s.g;return this._indexedDBKeys}isLocalStorageKeyMarked(e){return this.getLocalStorageKeys().includes(e)}markLocalStorageKey(e){this.isLocalStorageKeyMarked(e)||this.getLocalStorageKeys().push(e)}unmarkLocalStorageKey(e){if(!this.isLocalStorageKeyMarked(e))return;const t=this.getLocalStorageKeys().indexOf(e);this.getLocalStorageKeys().splice(t,1)}isIndexedDBKeyMarked(e){return this.getIndexedDBKeys().includes(e)}markIndexedDBKey(e,t,r){const s=this._getSecureIndexedDBKey(e,t,r);this.isIndexedDBKeyMarked(s)||this.getIndexedDBKeys().push(s)}unmarkIndexedDBKey(e,t,r){const s=this._getSecureIndexedDBKey(e,t,r);if(!this.isIndexedDBKeyMarked(s))return;const n=this.getIndexedDBKeys().indexOf(s);this.getIndexedDBKeys().splice(n,1)}save(){if(!this._hasInitialized())return;const e={l:this.getLocalStorageKeys(),i:this.getIndexedDBKeys()};window.localStorage.setItem(this._getKeyName(),JSON.stringify(e))}}},buT3:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));const s="LOCAL_STORAGE_MODE/DEFAULT",n="LOCAL_STORAGE_MODE/DRY";const o=new class{constructor(){this._mode=s}turnOnDryMode(){this._mode=n}turnOnDefaultMode(){this._mode=s}hasItem(e){return null!==window.localStorage.getItem(e)}setItem(e,t){this._mode!==n&&window.localStorage.setItem(e,t)}getItem(e){return window.localStorage.getItem(e)}removeItem(e){window.localStorage.removeItem(e)}getAllKeyNames(){return Object.keys(window.localStorage)}}},dUtG:function(e,t,r){"use strict";var s={enable:!0,allowLog:!1,mechanism:["onunhandledrejection"],blacklistOriginException:["not support","reaction db timeout","off-feature","aborted!!","search: aborted!!","abort running too long","Message key not found. The counter was repeated or the key was not filled.","Bad MAC","timeout of 10000ms exceeded","Network Error","entry/data is not valid","invalid msg"],blacklistSentryException:["Non-Error promise rejection captured with value: undefined","Non-Error promise rejection captured with keys:","Non-Error promise rejection captured with value:","DataError: Failed to execute 'put' on 'IDBObjectStore': Evaluating the object store's key path yielded a value that is not a valid key.","DataError: Failed to execute 'put' on 'IDBObjectStore': Evaluating the object store's key path did not yield a value.","DataError: Failed to execute 'delete' on 'IDBObjectStore': No key or key range specified.","InvalidStateError: Failed to execute 'transaction' on 'IDBDatabase': The database connection is closing.","FAIL_TO_OPEN_INVALID_STATE","Failed to PutOrAdd in database because not enough space for domain","Encountered full disk while opening backing store for indexedDB.open","The transaction is inactive or finished"],preventAll:!1};const n={config:{dsn:"https://dc3c7e89a91025e770593981134049e8@sentrypc.api.zalo.me/3",submitURL:"https://sentrypc.api.zalo.me/api/3/minidump/?sentry_key=dc3c7e89a91025e770593981134049e8",integrationFilter:s}};var o=r("DeO0"),i=r("VTBJ");var a=class{constructor(e){this.tag=e}info(...e){}error(...e){}};var c=class{constructor(e){this.name="IntegrationEventFilter",this.config=void 0,this.logger=new a("sentry-uhrf"),this.config="object"==typeof e?Object(i.a)(Object(i.a)({},s),e):s,this.logInfo("init success")}logInfo(...e){this.config.allowLog&&this.logger.info(...e)}_checkMatchMechanism(e){return!(!e.exception||"object"!=typeof e.exception)&&(!!Array.isArray(e.exception.values)&&!!e.exception.values.find((e=>{const t=e.mechanism||{};return!(!t.type&&!Array.isArray(this.config.mechanism))&&this.config.mechanism.includes(t.type)})))}_checkInBlacklistOriginException(e){if(!e||"object"!=typeof e)return!1;const t=this.config.blacklistOriginException||[],r=e.originalException||{};if("string"!=typeof r.name)return!1;if("string"!=typeof r.message)return!1;return!!t.find((e=>{if(e===r)return!0;if(e&&r instanceof Error){if(r.name.includes(e))return!0;if(r.message.includes(e))return!0}return!1}))}_checkInBlacklistSentryException(e){const t=this.config.blacklistSentryException||[];if(!e.exception||"object"!=typeof e.exception)return!1;if(!Array.isArray(e.exception.values))return!1;return!!e.exception.values.find((e=>{const r=(e||{}).value;return!!r&&t.find((e=>r.includes(e)))}))}_handleFilter(e,t){return this._checkMatchMechanism(e)&&(this.config.preventAll||this._checkInBlacklistOriginException(t)||this._checkInBlacklistSentryException(e))?null:e}setupOnce(e,t){e(((e,t)=>{if(this.logInfo("receive event",{event:e,hint:t}),this.config.enable){const r=this._handleFilter(e,t);return this.logInfo("result filter",r),r}return e}))}};function u(e){const t=e=>e?`${e.function} ${e.colno} ${e.lineno}`:"",r=function(e){const{exception:t}=e;if(t)try{const e=t.values[0].type;return`${e} ${t.values[0].value}`}catch(r){return"no message"}return"no message"}(e),s=function(e){const{exception:t,stacktrace:r}=e;if(t)try{return t.values[0].stacktrace.frames}catch(s){return}else if(r)return r.frames;return}(e),n=s&&s.length;if(n&&n>0){const e=s[0],o=s[n-1];return`${r} ${t(e)} ${t(o)}`}return r}var _=class{constructor(e,t){this.sentry=e,this.logger=t}initSentry(e){let t=new Map;const{enable:r,config:s}=e;if(r&&s.dsn)try{this.sentry.init({dsn:s.dsn,integrations:e=>(e.push(new c(s.integrationFilter)),e),release:"Zalo24.9.1",environment:"production",beforeSend:e=>{let r=u(e);return this.logger.info(`Message key error: ${r}`),t.has(r)?(this.logger.info("Error already exists!. Not sent to server"),null):(t.set(r,!0),this.logger.info("sent error to sentry server"),e)}}),this.logger.info("sentry init success")}catch(n){this.logger.error("sentry init error",n)}else this.logger.info("Sentry is disable")}};class l extends _{constructor(){super({init:o.init},new a("sentry-renderer"))}static getInstance(){return null===l._instance&&(l._instance=new l),l._instance}install(){const e=this.loadConfig();this.initSentry(e)}loadConfig(){try{const e=$zFileManager.getSentryConfig();return e?(this.logger.info("Load config from file sentry-config.json"),e):(this.logger.info("Load config from default config"),n)}catch(e){return this.logger.error(`Load config file error. \n${e} \nLoad config from default config`),n}}}l._instance=null,l.getInstance().install()},dko3:function(e,t,r){"use strict";var s=r("wH4e"),n=r("ggcH"),o=r("jDHv");class i{static instance(){return this._instance||(this._instance=new this),this._instance}handleConnectionClosedAbnormally(e){o.ModuleContainer.resolve(n.TDBCorruptionDetector).forceCheckDBCorruptionFor(s.AdapterType.IDB)}}i._instance=void 0;var a=i;class c{constructor(e){this.openRequest=e}set onsuccess(e){this.openRequest.onsuccess=async t=>{this.openRequest.result.onclose=e=>{a.instance().handleConnectionClosedAbnormally(e)},await e(t)}}set onblocked(e){this.openRequest.onblocked=t=>{e(t)}}set onupgradeneeded(e){this.openRequest.onupgradeneeded=async t=>{await e(t)}}set onerror(e){this.openRequest.onerror=async t=>{await e(t)}}get error(){return this.openRequest.error}get readyState(){return this.openRequest.readyState}get result(){return this.openRequest.result}get source(){return this.openRequest.source}get transaction(){return this.openRequest.transaction}}t.a=class{constructor(){}static open(e,t){const r=window.indexedDB.open(e,t);return new c(r)}}},eBEg:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var s=r("UJDs");const n="z",o=["info","warn","debug","error","critical"],i=["","F","C","T","FT","CT"];function a(){let e=0;const t={},r={};return o.forEach((s=>{i.forEach((o=>{""===o?(t[e]=`${n}${s}A`,r[`${n}${s}A`]=e,e+=1):"T"===o?(t[e]=`${n}${s}AT`,r[`${n}${s}AT`]=e,e+=1):(t[e]=`${n}${s}${o}`,r[`${n}${s}${o}`]=e,e+=1)}))})),{EnumeratedLevels:t,ReversedEnumeratedLevels:r}}Object.freeze(i),Object.freeze(o);const c=a().EnumeratedLevels,u=a().ReversedEnumeratedLevels;Object.freeze(c),Object.freeze(u);var _=r("jDHv"),l=r("jGDt"),d=r("KRcn");const f={[s.b.info]:!0,[s.b.warn]:!0,[s.b.error]:!0,[s.b.critical]:!0,[s.b.debug]:!1};var g=r("Wc52");class h{constructor(e,t){this.tags=e,this.transporters=t,this.enabled=!0,this.Sentry=null,this.tempOffConfig={toConsole:!1,toFile:!1,toSentry:!1},this.zsentry=(...e)=>{this.Sentry&&this.Sentry.captureException(new Error(e.join(" ")))},this.zfatal=(...e)=>{},this.zcritical=(...e)=>{},this.zsymb=(e,t,...r)=>{if(!this.enabled)return;const s=c[e];let n=[];if(s.endsWith("T")&&(null==r?void 0:r.length)>0&&(n=r.shift()),s.includes("zcritical"))return void(this.Sentry&&this.Sentry.captureException(new Error(r.join(" "))));const o=this._getLevel(s);let i="None";s.endsWith("A")||s.endsWith("AT")?i="ConsoleFile":s.endsWith("C")||s.endsWith("CT")?i="toConsole":(s.endsWith("F")||s.endsWith("FT"))&&(i="toFile"),"None"!==i&&this._applyFilter({metadata:{tick:Date.now(),level:o,ln:t,template:n,targetTransporter:i,tags:this.tags},args:r})},this._applyFilter=e=>{if(!f[e.metadata.level])return;let t=e.metadata.targetTransporter;const r=_.ModuleContainer.resolve(l.a),s=Object(d.a)(),n=!!this.transporters.consoleTransporter&&g.a[s].toConsole&&r.isEnabledConsole(),o=!!this.transporters.fileTransporter&&g.a[s].toFile;"ConsoleFile"===t&&(n||(t="toFile"),o||(t="None")),"toConsole"!==t||n||(t="None"),"toFile"!==t||o||(t="None"),"None"!==t&&(e.metadata.targetTransporter=t,this._transport(e))},this._transport=e=>{const t=e.metadata.targetTransporter;var r,s;"toConsole"!==t&&"ConsoleFile"!==t||(null===(r=this.transporters.consoleTransporter)||void 0===r||r.transport(e));"toFile"!==t&&"ConsoleFile"!==t||(null===(s=this.transporters.fileTransporter)||void 0===s||s.transport(e))},this._getLevel=e=>{let t=e;e.endsWith("A")?t=e.replace("A",""):e.endsWith("AT")?t=e.replace("AT",""):e.endsWith("C")?t=e.replace("C",""):e.endsWith("CT")?t=e.replace("CT",""):e.endsWith("F")?t=e.replace("F",""):e.endsWith("FT")&&(t=e.replace("FT",""));let r=s.b.info;switch(t){case"zinfo":r=s.b.info;break;case"zwarn":r=s.b.warn;break;case"zerror":r=s.b.error;break;case"zdebug":r=s.b.debug}return r},this.zinfo=(...e)=>{zconsole.debug("[ZLL-ALERT]: zinfo is not recognized. Function cannot be used directly")},this.zinfoC=(...e)=>{zconsole.debug("[ZLL-ALERT]: zinfoC is not recognized. Function cannot be used directly")},this.zinfoF=(...e)=>{zconsole.debug("[ZLL-ALERT]: zinfoF is not recognized. Function cannot be used directly")},this.zwarn=(...e)=>{zconsole.debug("[ZLL-ALERT]: zwarn is not recognized. Function cannot be used directly")},this.zwarnC=(...e)=>{zconsole.debug("[ZLL-ALERT]: zwarnC is not recognized. Function cannot be used directly")},this.zwarnF=(...e)=>{zconsole.debug("[ZLL-ALERT]: zwarnF is not recognized. Function cannot be used directly")},this.zerror=(...e)=>{zconsole.debug("[ZLL-ALERT]: zerror is not recognized. Function cannot be used directly")},this.zerrorC=(...e)=>{zconsole.debug("[ZLL-ALERT]: zerrorC is not recognized. Function cannot be used directly")},this.zerrorF=(...e)=>{zconsole.debug("[ZLL-ALERT]: zerrorF is not recognized. Function cannot be used directly")},this.zdebug=(...e)=>{zconsole.debug("[ZLL-ALERT]: zdebug is not recognized. Function cannot be used directly")},this.zdebugC=(...e)=>{zconsole.debug("[ZLL-ALERT]: zdebugC is not recognized. Function cannot be used directly")},this.zdebugF=(...e)=>{zconsole.debug("[ZLL-ALERT]: zdebugF is not recognized. Function cannot be used directly")},this.Sentry=r("wBhU")}disableFile(){this.tempOffConfig.toFile=!0}enableFile(){this.tempOffConfig.toFile=!1}disableConsole(){this.tempOffConfig.toConsole=!0}enableConsole(){this.tempOffConfig.toConsole=!1}static create(e,t){return new this(e,t)}pause(){this.enabled=!0}resume(){this.enabled=!1}}},gNXM:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var s=r("VTBJ"),n=r("dko3"),o=r("H/wq");const i="INDEXED_DB_MODE/DEFAULT",a="INDEXED_DB_MODE/DRY";const c=new class{constructor(){this._mode=i}turnOnDryMode(){this._mode=a}turnOnDefaultMode(){this._mode=i}async openExistedDB(e){const t=n.a.open(e);return await new Promise(((r,s)=>{t.onupgradeneeded=function(){var r;null===(r=t.transaction)||void 0===r||r.abort(),s(new o.b(`No database whose name is ${e} exists`))},t.onsuccess=function(){r(t.result)},t.onerror=function(){s(t.error)}}))}getKeyDataInObjectStore(e,t){return new Promise(((r,s)=>{const n=t.get(e);n.onsuccess=function(){r(n.result)},n.onerror=function(){s(n.error)}}))}getAllKeyNamesOfObjectStore(e){return new Promise(((t,r)=>{const s=e.getAllKeys();s.onsuccess=function(){t(s.result)},s.onerror=function(){r(s.error)}}))}async doesObjectStoreHaveKey(e,t){return void 0!==await this.getKeyDataInObjectStore(e,t)}async renameKeyOfObjectStore(e,t,r,n,o=(()=>{})){const i=await this.getKeyDataInObjectStore(e,r);this._mode!==a&&(await new Promise(((t,s)=>{const n=r.delete(e);n.onsuccess=function(){t()},n.onerror=function(){s(n.error)}})),await new Promise(((e,o)=>{const a=r.put(Object(s.a)(Object(s.a)({},i),{},{[n]:t}));a.onsuccess=function(){e()},a.onerror=function(){o(a.error)}})),o())}async deleteKeyOfObjectStore(e,t){this._mode!==a&&await new Promise(((r,s)=>{const n=t.delete(e);n.onsuccess=function(){r()},n.onerror=function(){s(n.error)}}))}async updateKeyOfObjectStore(e,t){this._mode!==a&&await new Promise(((r,s)=>{const n=t.put(e);n.onsuccess=function(){r()},n.onerror=function(){s(n.error)}}))}async getTotalKeyCountOfStore(e,t){let r=null;try{r=await this.openExistedDB(e)}catch(n){return-1}if(!r.objectStoreNames.contains(t))return-1;const s=r.transaction(t,"readwrite").objectStore(t);r.close();return(await this.getAllKeyNamesOfObjectStore(s)).length}}},gbvv:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var s=r("Cvfp");function n(e,t){const r=s.b[e];if(!r)return null;const n=r[t];return n||null}},ggcH:function(e,t,r){"use strict";var s=r("YdFT");r.d(t,"IndexedDBCorruptionDetectedEvent",(function(){return s.a})),r.d(t,"SQLiteDBCorruptionDetectedEvent",(function(){return s.b}));var n=r("vvAz");r.o(n,"TDBCorruptionDetector")&&r.d(t,"TDBCorruptionDetector",(function(){return n.TDBCorruptionDetector})),r.o(n,"TDBCorruptionDetectorAdapter")&&r.d(t,"TDBCorruptionDetectorAdapter",(function(){return n.TDBCorruptionDetectorAdapter}));var o=r("7k+P");r.d(t,"TDBCorruptionDetector",(function(){return o.a})),r.d(t,"TDBCorruptionDetectorAdapter",(function(){return o.b}))},iGh7:function(e,t,r){"use strict";r("cOPa"),r("mNvP"),r("QxEN")},vvAz:function(e,t){},wbRq:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return o}));let s=function(e){return e.DB_CORRUPTION_DETECTED="DB_CORRUPTION_DETECTED ",e}({}),n=function(e){return e[e.OK=0]="OK",e[e.RESET_COUNTER=1]="RESET_COUNTER",e[e.INVALID_COUNTER=2]="INVALID_COUNTER",e}({}),o=function(e){return e.STARTUP="STARTUP",e.INTERVAL="INTERVAL",e.FORCE_CHECK="FORCE_CHECK",e}({})}}]);
//# sourceMappingURL=../sourcemaps/lazy/default-login-render-shared-worker.7646c6bd3c01ee18deff.js.map