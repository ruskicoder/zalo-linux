const{app:app,session:session}=require("electron"),getFilterUrls=(e=[],i=[])=>i.reduce((i,l)=>{return[...i,...e.map(e=>[e,l].join(""))]},[]),PARTITION_NAME="persist:zalo",BLOCK_STORAGE_KEYS={block_typing:"@ZaDark:ENABLED_BLOCK_TYPING",block_delivered:"@ZaDark:ENABLED_BLOCK_DELIVERED",block_seen:"@ZaDark:ENABLED_BLOCK_SEEN"},FILTER_DOMAINS=["*://*.zalo.me","*://*.zaloapp.com"],FILTER_PATHS=["/api/message/typing?*","/api/group/typing?*","/api/message/deliveredv2?*","/api/e2ee/pc/t/message/delivered?*","/api/group/deliveredv2?*","/api/message/seenv2?*","/api/group/seenv2?*"],BLOCK_FILTER={urls:getFilterUrls(FILTER_DOMAINS,FILTER_PATHS)};app.whenReady().then(()=>{const e={block_typing:!1,block_delivered:!1,block_seen:!1};session.fromPartition("persist:zalo").webRequest.onBeforeRequest(BLOCK_FILTER,(i,l)=>{e.block_typing&&(i.url.includes("api/message/typing")||i.url.includes("api/group/typing"))&&l({cancel:!0}),e.block_delivered&&(i.url.includes("api/message/deliveredv2")||i.url.includes("api/e2ee/pc/t/message/delivered")||i.url.includes("api/group/deliveredv2"))&&l({cancel:!0}),e.block_seen&&(i.url.includes("api/message/seenv2")||i.url.includes("api/group/seenv2"))&&l({cancel:!0}),l({cancel:!1})}),session.fromPartition("persist:zalo").cookies.get({domain:"zadark.com"}).then((i=[])=>{i.forEach(i=>{i.name===BLOCK_STORAGE_KEYS.block_typing&&(e.block_typing="true"===i.value),i.name===BLOCK_STORAGE_KEYS.block_delivered&&(e.block_delivered="true"===i.value),i.name===BLOCK_STORAGE_KEYS.block_seen&&(e.block_seen="true"===i.value)})})});